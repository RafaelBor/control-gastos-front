<div class="forgot-password-container">
  <mat-card class="forgot-password-card">
    <!-- Título y subtítulo separados del header -->
    <div class="brand-section mt-3">
      <div class="brand-container">
        <h1 class="brand-title">
          Recuperar <span class="brand-accent">Contraseña</span>
        </h1>
        <p class="brand-subtitle">
          Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña
        </p>
      </div>
    </div>

    <mat-card-content class="card-content">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <!-- Email field -->
        <div class="form-field">
          <mat-form-field appearance="outline" class="custom-form-field">
            <mat-label>Correo Electrónico</mat-label>
            <mat-icon matPrefix class="field-icon">mail</mat-icon>
            <input 
              matInput 
              formControlName="email" 
              placeholder="tu@email.com"
              type="email"
              autocomplete="email">
            @if (forgotPasswordForm.get('email')?.hasError('required')) {
              <mat-error>El correo es requerido</mat-error>
            }
            @if (forgotPasswordForm.get('email')?.hasError('email')) {
              <mat-error>Ingrese un correo válido</mat-error>
            }
          </mat-form-field>
        </div>

        <!-- Messages -->
        @if (errorMessage) {
          <div class="message-container error-container">
            <mat-icon class="message-icon">error</mat-icon>
            <p class="error-message">{{ errorMessage }}</p>
          </div>
        }

        @if (successMessage) {
          <div class="message-container success-container">
            <mat-icon class="message-icon">check_circle</mat-icon>
            <p class="success-message">{{ successMessage }}</p>
          </div>
        }

        <!-- Send reset email button -->
        <div class="form-field">
          <button 
            mat-raised-button 
            type="submit"
            [disabled]="!forgotPasswordForm.valid || isLoading"
            class="reset-button">
            @if (isLoading) {
              <mat-icon class="button-icon spinning">refresh</mat-icon>
              Enviando...
            } @else {
              <mat-icon class="button-icon">send</mat-icon>
              Enviar Enlace de Recuperación
            }
          </button>
        </div>

        <!-- Info section -->
        @if (!successMessage) {
          <div class="info-section">
            <div class="info-card">
              <mat-icon class="info-icon">info</mat-icon>
              <div class="info-content">
                <h3>¿Cómo funciona?</h3>
                <ol>
                  <li>Ingresa tu correo electrónico registrado</li>
                  <li>Recibirás un enlace seguro en tu email</li>
                  <li>Haz clic en el enlace para crear una nueva contraseña</li>
                  <li>¡Listo! Podrás acceder con tu nueva contraseña</li>
                </ol>
              </div>
            </div>
          </div>
        }

        <!-- Divider -->
        <div class="divider">
          <span class="divider-text">¿Recordaste tu contraseña?</span>
        </div>

        <!-- Back to login button -->
        <div class="form-field">
          <button 
            [routerLink]="['/auth/login']" 
            mat-stroked-button 
            class="back-button">
            <mat-icon class="button-icon">arrow_back</mat-icon>
            Volver al Login
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  </div>
